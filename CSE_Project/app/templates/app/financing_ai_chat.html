{% extends 'app/base.html' %}
{% load static %}

{% block title %}Financing AI Chat - Cash Scan Explore{% endblock %}

{% block extra_head %}
<meta name="ask-url" content="{% url 'app:ask' %}">
{% endblock %}

{% block extra_css %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'app/styles/financing_ai_chat.css' %}">
{% endblock %}

{% block content %}
<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
<div class="chat-wrapper">
    <div class="sidebar">
        <div class="sidebar-button" onclick="refreshChat()">
            <i class="fas fa-plus"></i>
            新規チャット
        </div>
    </div>
    <div class="main-content">
        <div class="chat-container" id="chat"></div>
        <div class="input-area">
            <div class="input-container">
                <textarea id="input" class="input-box" placeholder="メッセージを入力..." rows="1"></textarea>
                <button id="send" class="send-button">送信</button>
                <span id="loading" class="loading typing" style="display: none">入力中</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
<script>
    window.ASK_URL = "{% url 'app:ask' %}";
    window.INITIAL_MESSAGE = "{{ initial_message|escapejs }}";
</script>
<script src="{% static 'app/scripts/financing_ai_chat.js' %}"></script>
{% endblock %}